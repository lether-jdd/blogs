---
title: Koa资料收集
date: 2020-3-23 21:13:51
tags:
categories: 
- node
- koa
---
# 1 如何学习高性能js引擎V8
1 V8采用的是即时编译的双轮驱动的设计，混合编译执行和解释执行这两种手段。
  编译执行：先编译成机器码，然后执行（先由解析器解析成中间代码，再由编译器编译成机器码）
  ![](/images/编译执行.jpg)
  解释执行：边翻译边执行（先由解析器解析成中间代码，再由解释器直接执行输出结果）
  ￼![](/images/解释执行.jpg)
  即时编译解析：授信解释执行字节码，然后将其中的热点代码（多次执行，循环）直接编辑成机器码，下次就不用编译。
2 V8引入了惰性编译、内联缓存、隐藏类、延迟解析 ？
3 V8借鉴了很多语言的特性，C语言的基本语法，Java的类型系统和内存管理，Scheme的函数作为一等公民，Self的基于原型的继承机制
  为了实现函数是一等公民，js采取了基于对象的策略，为了实现原型集成，V8为每个对象引入了__proto__属性

4 隐藏类：将js动态类型转换为静态类型，消除动态类型的语言执行速度过慢的问题。
  惰性解析：加速代码的启动速度。
5 时间循环系统和垃圾回收机制
6 js是一种自动垃圾回收的语言。V8在执行垃圾回收时，会展东主线程的资源，如果程序频繁出发垃圾回收，会阻塞主线程。
7 v8编译流程图
￼![](/images/v8_编译流程图.jpg)
8 V8学习知识图谱
￼![](/images/v8_知识图谱.jpg)
# 2 V8是如何执行一段代码的
1 可以把 V8 看成是一个虚构出来的计算机，也称为虚拟机，虚拟机通过模拟实际计算机的各种功能来实现代码的执行，如模拟实际计算机的 CPU、堆栈、寄存器等，虚拟机还具有它自己的一套指令系统
所以对于 JavaScript 代码来说，V8 就是它的整个世界，当 V8 执行 JavaScript 代码时，你并不需要担心现实中不同操作系统的差异，也不需要担心不同体系结构计算机的差异，你只需要按照虚拟机的规范写好代码就可以了。
2 虚拟机，模拟计算机的这个编译执行流程
3 高级代码为什么要先编译再执行
  1 机器只能理解机器语言（指令集）
  1 汇编语言依然是复杂且繁琐的，即便你写一个非常简单的功能，也需要实现大量的汇编代码（不同的 CPU 有着不同的指令集；在编写汇编代码时，我们还需要了解和处理器架构相关的硬件知识）