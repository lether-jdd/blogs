(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"../client/src/assets/svg/arrow-down.svg":function(e,t,n){"use strict";n.d(t,"a",function(){return p});n("./core-js/modules/es7.symbol.async-iterator.js"),n("./core-js/modules/es6.symbol.js"),n("./core-js/modules/es6.object.assign.js"),n("./core-js/modules/es6.object.set-prototype-of.js");var r=n("./react/index.js"),o=n.n(r);function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,l(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement("svg",c({width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},this.props),o.a.createElement("g",{id:"expand-less",fill:"none",fillRule:"evenodd"},o.a.createElement("path",{d:"M23.88 27.12l9.94-9.94 2.12 2.12L24.6 30.65a1 1 0 0 1-1.41 0L11.82 19.3l2.12-2.12 9.94 9.94z",id:"\\u8DEF\\u5F84",fill:"#000",fillRule:"nonzero"})))}}])&&s(n.prototype,r),a&&s(n,a),t}()},"../client/src/assets/svg/error-circle-gray.svg":function(e,t,n){"use strict";n.d(t,"a",function(){return p});n("./core-js/modules/es7.symbol.async-iterator.js"),n("./core-js/modules/es6.symbol.js"),n("./core-js/modules/es6.object.assign.js"),n("./core-js/modules/es6.object.set-prototype-of.js");var r=n("./react/index.js"),o=n.n(r);function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,l(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement("svg",c({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},this.props),o.a.createElement("g",{id:"Page-1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{id:"Artboard",transform:"translate(-395 -327)",fill:"#909090"},o.a.createElement("path",{d:"M403 342a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm0-7.94l-1.87-1.87a.66.66 0 0 0-.94.94l1.87 1.87-1.87 1.87a.66.66 0 0 0 .94.94l1.87-1.87 1.87 1.87a.66.66 0 0 0 .94-.94l-1.87-1.87 1.87-1.87a.66.66 0 0 0-.94-.94l-1.87 1.87z",id:"\\u5220\\u9664\\u9644\\u4EF6"}))))}}])&&s(n.prototype,r),a&&s(n,a),t}()},"../client/src/components/Select/OrgMultiSelect/index.js":function(e,t,n){"use strict";var r=n("../client/src/components/Select/utils/SetOrgTree.js"),o=(n("./core-js/modules/es7.symbol.async-iterator.js"),n("./core-js/modules/es6.symbol.js"),n("./core-js/modules/es6.object.assign.js"),n("./core-js/modules/es6.object.set-prototype-of.js"),n("./core-js/modules/es6.regexp.search.js"),n("./antd/lib/tooltip/style/index.js"),n("./antd/lib/tooltip/index.js")),a=n.n(o),c=(n("./core-js/modules/es6.regexp.replace.js"),n("./core-js/modules/es6.function.name.js"),n("./core-js/modules/es7.object.values.js"),n("./core-js/modules/es6.regexp.to-string.js"),n("./core-js/modules/web.dom.iterable.js"),n("./core-js/modules/es6.array.iterator.js"),n("./core-js/modules/es6.string.iterator.js"),n("./core-js/modules/es6.set.js"),n("./react/index.js")),s=n.n(c),i=n("./mobx-react/index.module.js"),l=n("../client/src/components/Toastr/index.js"),u=n("../client/src/components/CommonUI/Empty/index.js"),p=n("../client/src/utils/tools.js"),f=n("../client/src/utils/request.js");function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){var t;return Object(i.inject)("store")(t=Object(i.observer)(t=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=m(this,(e=v(n)).call.apply(e,[this].concat(o)))).state={expandedKeys:new Set},t.onExpandedChange=function(e){var n=e.item;return t.dealExpandedKey(n.key)},t.dealExpandedKey=function(e){var n=t.state.expandedKeys;n.has(e)?n.delete(e):n.add(e),t.setState({expandedKeys:n})},t.doSearch=function(){return t.selector.doSearch()},t.initExpandKeys=function(){t.setState({expandedKeys:new Set})},t.getItemClassName=function(e){var n=t.props.data.selectedItems,r=t.props.existedData,o="name";return(void 0===r?[]:r).some(function(t){return t&&t.key&&t.key.toString()===e.key.toString()})&&(o+=" exist"),n.some(function(t){return t&&t.key&&t.key.toString()===e.key.toString()})&&(o+=" selected"),o},t.renderRow=function(e){var n=e.item;if("loading"===n.type)return s.a.createElement("div",{className:"tree-row",key:"loading"},s.a.createElement("div",{className:"loading"}));if(void 0!==n.key){var r=t.getItemClassName(n);return s.a.createElement("div",{className:"tree-row org",key:n.key},s.a.createElement("div",{className:"".concat(r)},n.text))}},t.handleTreeRowClick=function(e){var n=e.item;if(!("number"!==typeof+n.key||n.key.toString().indexOf("loading")>-1)){var r=t.props,o=r.existedData,a=void 0===o?[]:o,c=r.repeatTipTxt;if(a.some(function(e){return+e.key===+n.key&&!e.isNew})){if(!c)return;return l.a.error(c(n.text))}var s=t.props.store.orgTree,i=t.props,u=i.handleSelectedItem,p=i.data;n.fullName=s.getOrgPath(n),u({key:p.key,item:n}),t.dealExpandedKey(n.key),t.selector.clearSearch().then(function(e){e&&t.initExpandKeys()}).catch(function(e){return console.error(e)})}},t.formatSearchResult=function(e){return Object.values(e).map(function(e){var t=e.orgInfoVOS||[];if(!t.length)return null;var n={},r=t.map(function(e){return e.name}),o=t.pop();return n.key=o.orgId,n.text=o.name,n.fullName=r.join("/"),n.showName=Object(p.n)(r.join("-")),n})},t.renderSearchItems=function(e){return e.map(function(e){var n=t.getItemClassName(e),r=e.fullName,o=e.key;return s.a.createElement("div",{className:n,key:o,onClick:function(){t.handleTreeRowClick({item:e})}},s.a.createElement(a.a,{title:r,overlayClassName:"orgfullname-tip",placement:"right"},Object(p.n)(r.replace(/\//g,"-"))))})},t.renderSearchList=function(e){var n=e.searchResult;if(n)return 0===(n=t.formatSearchResult(n)).length?s.a.createElement(u.a,{text:"\u65e0\u641c\u7d22\u7ed3\u679c"}):s.a.createElement("div",{className:"input-select-search-wrapper org"},t.renderSearchItems(n))},t.getSelector=function(e){t.selector=e},t.search=function(e){return Object(f.c)("/api/org/orgName?orgName=".concat(encodeURIComponent(e)))},t}var r,o,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(n,s.a.Component),r=n,(o=[{key:"render",value:function(){var t=this.renderRow,n=this.handleTreeRowClick,r=this.getSelector,o=this.onExpandedChange,a=this.renderSearchList,c=this.search,i=this.initExpandKeys,l=this.state.expandedKeys,u=this.props,p=u.data,f=u.handleSelectedItem,d=u.placeholder,h=p.selectedItems;return s.a.createElement(e,y({renderRow:t,onRowClick:n,onExpandedChange:o,selectedItems:h,renderSearchItems:a,dealSelectItem:f,expandedKeys:l,placeholder:d||"\u8bf7\u9009\u62e9/\u641c\u7d22\u7ec4\u7ec7\u8282\u70b9",search:c,getSelector:r,initExpandKeys:i,unit:"\u4e2a\u90e8\u95e8",type:"org",dropDownTip:"\u4ec5\u652f\u6301\u8f93\u5165\u5b8c\u6574\u90e8\u95e8\u94fe\u8fdb\u884c\u641c\u7d22\u6dfb\u52a0\uff08\u5982\uff1a\u7f8e\u56e2/\u884c\u653f\u90e8/\u884c\u653fBP\u4e2d\u5fc3\uff09\u3002\u5b8c\u6574\u90e8\u95e8\u94fe\u53ef\u4ee5\u4ece\u5927\u8c61\u4e2a\u4eba\u540d\u7247\u4e2d\u83b7\u5f97"},this.props))}}])&&h(r.prototype,o),c&&h(r,c),n}())||t)||t},j=(n("./core-js/modules/es6.array.from.js"),n("./core-js/modules/es6.promise.js"),n("./regenerator-runtime/runtime.js"),n("../client/src/utils/userInfo.js")),S=n("../client/src/consts/index.js");function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e,t,n,r,o,a,c){try{var s=e[a](c),i=s.value}catch(l){return void n(l)}s.done?t(i):Promise.resolve(i).then(r,o)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==w(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){var t;return Object(i.inject)("store")(t=Object(i.observer)(t=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=I(this,(e=C(n)).call.apply(e,[this].concat(o)))).state={expandedKeys:new Set},t.doSearch=function(){return t.selector.doSearch()},t.onExpandedChange=function(e){var n=e.item;return t.dealExpandedKey(n.key)},t.dealExpandedKey=function(e){var n=t.state.expandedKeys;n.has(e)?n.delete(e):n.add(e),t.setState({expandedKeys:n})},t.initExpandKeys=function(){t.setState({expandedKeys:new Set})},t.getItemClassName=function(e){var n=t.props.data.selectedItems,r=t.props.existedData,o="avatar";return(void 0===r?[]:r).some(function(t){return t&&t.key&&t.key.toString()===e.key.toString()})&&(o+=" exist"),n.some(function(t){return t&&t.key&&t.key.toString()===e.key.toString()})&&(o+=" selected"),o},t.renderRow=function(e){var n=e.item;if("loading"===n.type)return s.a.createElement("div",{className:"tree-row"},s.a.createElement("div",{className:"loading"}));if(void 0!==n.key){if("number"!==typeof n.key&&"root"!==n.key){var r=t.getItemClassName(n);return s.a.createElement("div",{className:"tree-row user",key:n.key},s.a.createElement("div",{className:r},s.a.createElement("img",{src:n.avatar||S.e,alt:"\u5934\u50cf"})),s.a.createElement("div",{className:"name"},n.text))}return s.a.createElement("div",{className:"tree-row"},n.text)}},t.handleTreeRowClick=function(e){var n=e.item,r=t.props,o=r.existedData,a=void 0===o?[]:o,c=r.repeatTipTxt;if(a.some(function(e){return e.key===n.key&&!e.isNew})){if(!c)return;return l.a.error(c(n.text))}if(n.userInfo){var s=t.props;(0,s.handleSelectedItem)({key:s.data.key,item:n})}t.dealExpandedKey(n.key),t.selector.clearSearch().then(function(e){e&&t.initExpandKeys()}).catch(function(e){return console.error(e)})},t.formatSearchResult=function(e){return e.map(function(e){return{key:e.account,text:e.name,avatar:e.avatar,orgNamePath:e.orgNamePath,userInfo:e,tenantId:e.tenantId||j.a.tenantId}})},t.renderSearchItems=function(e,n){return e.map(function(e){var r=Object(p.c)(Object(p.n)(e.orgNamePath),e.key),o=t.getItemClassName(e);return s.a.createElement("div",{className:"item",key:e.key,onClick:function(n){t.handleTreeRowClick({item:e}),n.nativeEvent.stopImmediatePropagation()}},s.a.createElement(a.a,{title:"".concat(e.text.replace(/\/./g,"")," / ").concat(Object(p.c)(e.orgNamePath,e.key)),placement:"right"},s.a.createElement("div",{className:o},s.a.createElement("img",{src:e.avatar||S.e,alt:"\u5934\u50cf"})),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"name",dangerouslySetInnerHTML:{__html:"".concat(Object(p.D)(e.text,n),"/").concat(Object(p.D)(e.key,n))}}),s.a.createElement("div",{className:"org"},r))))})},t.renderSearchList=function(e){var n=e.searchResult,r=e.searchKeyWord;return 0===(n=t.formatSearchResult(n)).length?s.a.createElement(u.a,{text:"\u65e0\u641c\u7d22\u7ed3\u679c"}):s.a.createElement("div",{className:"input-select-search-wrapper user"},t.renderSearchItems(n,r))},t.search=function(){var e,n=(e=regeneratorRuntime.mark(function e(n){var r,o,a,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},o=t.props.store.user,a=o.searchUser,c=o.searchUserLeft,t.props.searchEmployeeLeft){e.next=8;break}return e.next=5,a(n);case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,c(n);case 10:r=e.sent;case 11:return r=Object.assign.apply(Object,[{}].concat(O(r))),t.props.store.user.setUserInfos(r),s=Object.values(r).map(function(e){return e.jobStatusId===S.g.OUTJOB&&(e.name+="(\u79bb\u804c)"),e}),e.abrupt("return",s);case 16:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function c(e){x(a,r,o,c,s,"next",e)}function s(e){x(a,r,o,c,s,"throw",e)}c(void 0)})});return function(e){return n.apply(this,arguments)}}(),t.getSelector=function(e){t.selector=e},t}var r,o,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(n,s.a.Component),r=n,(o=[{key:"componentDidMount",value:function(){var e=this.props.getRef;e&&e(this)}},{key:"render",value:function(){var t=this.renderRow,n=this.handleTreeRowClick,r=this.getSelector,o=this.initExpandKeys,a=this.onExpandedChange,c=this.renderSearchList,i=this.search,l=this.state.expandedKeys,u=this.props,p=u.data,f=u.handleSelectedItem,d=u.placeholder,y=u.searchEmployeeLeft,h=p.selectedItems;return s.a.createElement(e,E({renderRow:t,onRowClick:n,onExpandedChange:a,selectedItems:h,renderSearchItems:c,dealSelectItem:f,expandedKeys:l,placeholder:d||"\u8bf7\u8f93\u5165\u59d3\u540d/mis\u67e5\u8be2",search:i,isHideOrgTree:y,getSelector:r,initExpandKeys:o,unit:"\u4eba",type:"user"},this.props))}}])&&k(r.prototype,o),c&&k(r,c),n}())||t)||t},T=(n("./antd/lib/input/style/index.js"),n("./antd/lib/input/index.js")),_=n.n(T),K=n("./lodash.debounce/index.js"),R=n.n(K),D=n("./lodash.clonedeep/index.js"),L=n.n(D),U=n("../client/src/components/CommonUI/Loading/index.js"),M=n("../client/src/components/Tree/TreeView/index.js"),W=n("../client/src/assets/svg/arrow-down.svg"),A=n("../client/src/assets/svg/cross.svg"),F=n("../client/src/assets/svg/error-circle-gray.svg");n("../client/src/components/Select/OrgMultiSelect/style.styl");function V(e){return(V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==V(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=H(this,z(t).call(this,e))).initShowSelect=function(e){return!1!==e},n.preventD=function(e){return e.preventDefault()},n.handleShow=function(e){if(e){var t=n.state,r=t.isShowSelect,o=t.isEditing;if(e.target.closest(".input-select")!==n.container)n.hideDropDown();else{if(e.target.closest(".delete"))return;var a=e.target.closest(".select-container");r&&o||n.setState({isShowSelect:!0,isEditing:!0}),setTimeout(function(){return a&&n.focusInput()})}}},n.hideDropDown=function(){var e=n.state,t=e.isShowSelect,r=e.isEditing;if(t||r){n.setState({isShowSelect:!1,isEditing:!1});var o=n.props,a=o.expandedKeys,c=o.onBlur,s=o.firstKey;a.clear(),a.add(s),document.removeEventListener("keydown",n.deleteLastItem),c&&c()}},n.focusInput=function(){var e=n.searchInput&&n.searchInput.input;e&&(e.focus(),document.addEventListener("keydown",n.deleteLastItem))},n.deleteLastItem=function(e){var t=n.searchInput&&n.searchInput.input;if(!(t&&t.value.length>0)){var r=e.keyCode||e.which;if(8===r||46===r){var o=n.props,a=o.data,c=o.dealSelectItem,s=a.selectedItems;if(!s.length)return;var i=s.slice().pop();c({key:a.key,item:i})}}},n.setSearchState=function(){n.setState({isSearching:!0,searchResult:[],searchState:S.t.PENDING})},n.handleSearchInput=function(e,t){e.persist();var r=e.target.value.trim();r?(n.setState({searchKeyWord:r}),n.setSearchState(),t?n.doSearch(r):n.searchDebounce(r)):n.clearSearch(),n.setState({currentVal:r})},n.doSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.searchKeyWord,t=n.props.search;e&&t(e).then(function(t){e===n.state.searchKeyWord&&(null===t&&(t=[]),n.setState({searchResult:t,searchState:S.t.DONE}))}).catch(function(t){e===n.state.searchKeyWord&&n.setState({searchState:S.t.ERROR}),console.error(t)})},n.clearSearch=function(){var e=!1;return n.state.isSearching&&(e=!0,n.setState({isSearching:!1,searchKeyWord:"",searchResult:[],currentVal:""})),Promise.resolve(e)},n.resetSelect=function(){var e=n.props,t=e.initExpandKeys,r=e.dealSelectItem,o=e.data.key;t(),r({key:o,type:"clear"}),n.clearSearch(),n.searchInput.focus()},n.renderSelect=function(){var e=n.state.searchResult;e=L()(e);var t=n.state,r=t.searchState,o=t.searchKeyWord,a=t.isSearching,c=n.props,i=c.renderRow,l=c.onExpandedChange,u=c.expandedKeys,p=c.treeData,f=c.dropDownTip,d=c.renderSearchItems,y=c.onRowClick,h=c.notFoundContent;if(c.isHideOrgTree&&!a)return"";var m=s.a.createElement(U.a,null);return!0===p.isNotFound&&e&&!e.length?m=f?s.a.createElement("div",{className:"dropDown-tip",key:"drop"},f):h():a?o&&r!==S.t.PENDING&&(m=d({searchResult:e,searchState:r,searchKeyWord:o})):m=p.children.length>0?[!!f&&s.a.createElement("div",{className:"dropDown-tip",key:"drop"},f),s.a.createElement(M.a,{key:"tree",treeData:p,expandedKeys:u,rowHeight:40,renderRow:i,onRowClick:function(){y.apply(void 0,arguments),n.searchInput.focus()},updateKeyToPath:!1,onExpandedChange:l})]:s.a.createElement(U.a,null),s.a.createElement("div",{className:"select-wrapper"},s.a.createElement("div",{className:"tree-wrapper"},m))},n.renderInput=function(){var e=n.state,t=e.currentVal,r=e.isEditing,o=n.props,c=o.placeholder,i=o.dealSelectItem,l=o.data,u=o.unit,p=o.type,f=o.popupContainer,d=o.inputStyle,y=void 0===d?{}:d,h=l.selectedItems,m=h.length,v=[],b=!1;return m>0&&(v=h.map(function(e){return s.a.createElement(a.a,{key:e.key,title:"user"===p&&e.key,getPopupContainer:f},s.a.createElement("div",{className:"select-item"},e.text,s.a.createElement(A.a,{className:"delete",onClick:function(t){i({key:l.key,item:e}),t.stopPropagation()}})))})),!r&&(n.inputContainer&&n.inputContainer.clientHeight>=58&&m||m>5)&&(b=!0,v.push(s.a.createElement("div",{className:"total",key:"total"},"\u7b49",h.length,u))),s.a.createElement("div",{ref:function(e){n.inputContainer=e},className:"input-container ".concat(b&&(r?"expand":"collapse"))},v,s.a.createElement("div",{className:"input-wrapper",style:y},s.a.createElement(_.a,{placeholder:c,value:t,className:"input-search",autoComplete:"off",spellCheck:"false",onChange:n.handleSearchInput,onKeyUp:function(e){13===e.keyCode&&n.handleSearchInput(e,!0)},ref:function(e){n.searchInput=e}})))},n.state={isShowSelect:n.initShowSelect(e.data.isShowSelect),isSearching:!1,searchKeyWord:"",searchResult:[],searchState:S.t.DONE,currentVal:"",isEditing:n.initShowSelect(e.data.isShowSelect)},n.searchDebounce=R()(n.doSearch,500);var r=Object(p.q)().isMobile;return n.evType=r?"touchstart":"mousedown",n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,c["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){this.props.getSelector&&this.props.getSelector(this),document.addEventListener(this.evType,this.handleShow),"mouseup"===this.evType&&this.searchInput.input.addEventListener("mousewheel",this.preventD),this.state.isEditing&&this.focusInput()}},{key:"componentWillUnmount",value:function(){document.removeEventListener(this.evType,this.handleShow),"mouseup"===this.evType&&this.searchInput.input.removeEventListener("mousewheel",this.preventD)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isEditing,r=t.isShowSelect,o=this.props.data.isEmpty;return s.a.createElement("div",{className:"input-select",ref:function(t){e.container=t}},s.a.createElement("div",{className:"select-container ".concat(r?"focus":""," ").concat(o?"danger":"")},this.renderInput(),!0===n?s.a.createElement(F.a,{className:"delete icon",onClick:this.resetSelect}):s.a.createElement(W.a,{className:"down icon"})),r&&this.renderSelect())}}])&&B(n.prototype,r),o&&B(n,o),t}();n.d(t,"a",function(){return G}),n.d(t,"b",function(){return Q});var G=g(Object(r.a)(q)),Q=N(Object(r.a)(q))},"../client/src/components/Select/OrgMultiSelect/style.styl":function(e,t,n){},"../client/src/components/Select/utils/SetOrgTree.js":function(e,t,n){"use strict";n("./core-js/modules/es7.symbol.async-iterator.js"),n("./core-js/modules/es6.symbol.js"),n("./core-js/modules/es6.object.assign.js"),n("./core-js/modules/es7.object.get-own-property-descriptors.js"),n("./core-js/modules/es6.array.iterator.js"),n("./core-js/modules/es6.object.keys.js"),n("./core-js/modules/es6.object.set-prototype-of.js"),n("./core-js/modules/web.dom.iterable.js");var r=n("./react/index.js"),o=n.n(r),a=n("./mobx/lib/mobx.module.js"),c=n("./mobx-react/index.module.js"),s=n("./lodash.debounce/index.js"),i=n.n(s);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=function(e){var t;return Object(c.observer)(t=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=y(this,h(n).call(this))).initOrgTree=function(){return e.props.store.orgTree.initOrgTree()},e.formatOrgTree=function(t){var n=Object(a.toJS)(t);if(t)if("user"===e.props.type){!function e(t){t.children.forEach(function(t){if("org"===t.typeKey){if(t.done&&t.children&&0===t.children.length)return void(t.children=null);if(!t.children)return void(t.children=[]);e(t)}})}(n)}else if("org"===e.props.type){!function e(t){t.children&&(t.children=t.children.filter(function(e){return"loading"===e.type||"org"===e.typeKey&&(e.hasSub||(e.children=null),!0)}),t.children.length&&t.children.forEach(function(t){return e(t)}))}(n)}return n},e.onOrgExpandChange=function(t){var n=t.item,r=t.path,o=n.key,a=n.children;(a&&0===a.length||a&&"loading"===a[0].type)&&e.props.store.orgTree.getOrgChild({orgId:o,path:r});e.props.onExpandedChange({item:n})},e.onUserExpandChange=function(t){var n=t.item,r=t.path;if(t.expanded){var o=n.key,a=n.children,c=n.done;if(a&&!c){var s=n.children&&n.children.length;if(a&&!a.some(function(e){return"employee"===e.typeKey})){var i=e.props.store.orgTree;i.getOrgEmployees({orgId:o,path:r}).then(function(){s||i.getOrgChild({orgId:o,path:r,isAfterEmployee:!0})}).catch(function(e){return console.error(e)})}e.props.onExpandedChange({item:n})}}},e.onExpandChange=function(){var t,n;return"org"===e.props.type?(t=e).onOrgExpandChange.apply(t,arguments):(n=e).onUserExpandChange.apply(n,arguments)},e.notFoundContent=function(){var t=e.props.store.user.userInfo;return 1!==+t.type&&99!==+t.type?o.a.createElement("div",{className:"noperm-tip"},"\u5bf9\u4e0d\u8d77\uff0c\u60a8\u65e0\u6cd5\u67e5\u770b\u7ec4\u7ec7\u67b6\u6784"):o.a.createElement("div",null)},e.onExpandChange=i()(e.onExpandChange,16),e}var r,c,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,o.a.Component),r=n,(c=[{key:"componentDidMount",value:function(){this.initOrgTree()}},{key:"render",value:function(){var t=this.props.store.orgTree,n=t.orgTreeData,r=t.rootKey,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props);return r&&a.expandedKeys.add(r),o.a.createElement(e,u({treeData:this.formatOrgTree(n),notFoundContent:this.notFoundContent,firstKey:r},a,{onExpandedChange:this.onExpandChange}))}}])&&d(r.prototype,c),s&&d(r,s),n}())||t}}}]);