---
title: 模板引擎
date: 2019-08-23 21:13:51
tags: 模板引擎
categories: 
- 奇技淫巧
---
# 1 模板引擎的核心特性
1 插值
   <%= user %>
   ${}
   {{}}等
2 转义输出 （预防xss）
```bash
const entityMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;',
    '/': '&#x2F;',
    '`': '&#x60;',
    '=': '&#x3D;'
}
const escapeHTML = string => String(string).replace(/[&<>"'`=\/]/g, (s) => entityMap[s]);
const greeting = data => `hello ${escapeHTML(data.user)}`
```
3 模板内嵌 JavaScript 语句
  在es6中字符串模板可是是任何js表达式，所以对for循环这种语句可以通过数组的高阶函数实现
# 2 es6无法支持的一些场景及特性
模板引擎在服务器端场景下的模板缓存、管道输出、模板文件模块化管理等特性，ES6 模板本身都不具备。并且模板引擎作为独立的库，API 的封装和扩展性都比 ES6 模板中只能插入表达式要好。
# 3 es6带标签的模板
ES6 还提供了更加优雅且更容易复用的方案——带标签的模板字面量（tagged template literals，以下简称标签模板）。
标签模板的语法很简单，就是在模板字符串的起始反撇号前加上一个标签。这个标签当然不是随便写的，它必须是一个可调用的函数或方法名。加了标签之后的模板，其输出值的计算过程就不再是默认的处理逻辑了，
