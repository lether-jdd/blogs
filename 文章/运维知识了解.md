云主机？宿主机？物理机？Docker? K8s? Paas? serverless? 关于这些名词不知道是否很多前端er会觉得陌生又熟悉。反正本人之前是这样的状态，所以就了解了一下这方面的知识。说起这些，就要从起源开始说起了，那么这一切名词的起源是啥呢？那就是大家也非常熟悉的另一个名词-云计算
# 云计算
> "是一种基于互联网的计算方式，通过这种方式，共享的软硬件资源和信息可以按需求提供给计算机各种终端和其他设备，使用服务商提供的电脑基建作计算和资源。" -- wikipedia

大致意思就是：一个大型的机房或者集群，其中的资源作为服务对外提供。

与普通机房的区别是：大容量、超高并发、超快速度、超强安全。

机房中资源按照层次进行划分有三种：
- 底层硬件资源（cpu、硬盘、网卡、操作系统、存储）
- 平台（框架类或中间件）
- 应用软件

对外提供的服务类型：
- Iaas(infrastructure as a service):按照底层硬件资源对外提供服务，适合初创公司或小公司，代表：OpenStack。
- Paas(platform as a service):按照平台对外提供服务，代表：Kubernetes，Kubernetes可以运行在OpenStack上。
- Saas(software as a service):按照软件对外提供服务，大多数SaaS应用程序直接通过Web浏览器运行，不需要在客户端进行任何下载或安装。
- Baas(back as a service):后端即服务，通常是restful API的方式对外提供服务，不知道后端微服务化之后rfc的算不算，感觉应该也算。
- Faas(function as a service):函数即服务，开发者可以直接将服务业务逻辑代码部署，运行在第三方提供的无状态计算容器中，开发者只需要编写业务代码即可，无需关注服务器，并且代码的执行它是由事件触发的。
> serverless  更多的表达的是一个无服务的概念（但其实是有的，只是想让你产生一种无服务的感觉，哈哈哈，这句话很矛盾吧），是将BaaS和FaaS组合在一起的应用，用户只需要关注应用的业务逻辑代码，编写函数为粒度将其运行在FaaS平台上，并且和BaaS第三方服务整合在一起，最后就搭建了一个完整的系统。整个系统过程中完全无需关注服务器。

## 资源的管理&虚拟化技术
如果每个人申请资源的时候都直接分配一台物理机，虽然简单但是暴力，浪费了昂贵的计算资源，所以为了更好地分配资源，产生了虚拟化的技术。

### 虚拟化技术
- Hypervisor：
最开始的虚拟化技术是操作系统级别的资源隔离，虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程；这类虚拟化技术一般由Hypervisor完成资源虚拟化，常见的Hypervisor有VMware、KVM、Xen、Virtual Box，目前快手halo平台中的虚机使用的是KVM。那既然是要对外提供服务，肯定得有一个平台对这些虚机进行管理，那么常见的OpenStack就是这么一个平台。
- Docker：后来由于虚机存在种种诟病（启动时间长，开销大，当然各有所长了），出现了Docker技术，是进程级的资源隔离，容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。常听的K8s就是用来管理这些容器的，主要负责集群中容器的启动、扩展、回收等工作。
### Docker
- 镜像：相当于是一个 root 文件系统，采用分层存储,在另外一个镜像上面分层添加（scratch空镜像）。
- 容器：容器是镜像运行时的实体，实质是进程，容器可以被创建、启动、停止、删除、暂停等。
### K8s
Kubernetes通过将容器放入在节点（Node）上运行的 Pod 中来执行你的工作负载
- 节点：物理机或者虚机，可以运行多个容器
- pod:一组容器，这些容器共享存储、网络、以及怎样运行这些容器的声明，一个 Pod 中的容器之间通过本地回路（loopback）通信。
- 一个节点可对应多个pod
- 容器组是创建，调度，管理的最小单位。 一个容器组使用相同的 Docker 容器并共享卷（挂载点）。一个容器组是一个特定应用的打包集合，包含一个或多个容器,一个容器组被认为只有很短的运行周期。容器组被调度到一组节点运行，直到容器的生命周期结束或者其被删除。如果节点死掉，运行在其上的容器组将会被删除而不是重新调度。一个容器组中，容器都使用相同的网络地址和端口，可以通过本地网络来相互通信。每个容器组都有独立的 IP，可用通过网络来和其他物理主机或者容器通信。

???? 关于k8s与pod之间的网络、代理等问题













